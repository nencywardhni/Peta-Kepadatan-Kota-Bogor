<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title>Peta Klasifikasi Kepadatan Penduduk Kota Bogor</title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="data/Kepadatan_Penduduk_Kota_Bogor_1.js"></script>
        <script>
        var map = L.map('map', {
            zoomControl:false, maxZoom:28, minZoom:1
        }).fitBounds([[-6.726793147325042,106.56594104293706],[-6.452894010471319,107.09364091581736]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // add class to format popup if it contains media
		function addClassToPopupIfMedia(content, popup) {
			var tempDiv = document.createElement('div');
			tempDiv.innerHTML = content;
			if (tempDiv.querySelector('td img')) {
				popup._contentNode.classList.add('media');
					// Delay to force the redraw
					setTimeout(function() {
						popup.update();
					}, 10);
			} else {
				popup._contentNode.classList.remove('media');
			}
		}
        var title = new L.Control({'position':'topright'});
        title.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'info');
            this.update();
            return this._div;
        };
        title.update = function () {
            this._div.innerHTML = '<h2>Peta Klasifikasi Kepadatan Penduduk Kota Bogor</h2>';
        };
        title.addTo(map);
        var abstract = new L.Control({'position':'topright'});
        abstract.onAdd = function (map) {
            this._div = L.DomUtil.create('div',
            'leaflet-control abstract');
            this._div.id = 'abstract'

                abstract.show();
                return this._div;
            };
            abstract.show = function () {
                this._div.classList.remove("abstract");
                this._div.classList.add("abstractUncollapsed");
                this._div.innerHTML = 'Peta ini memberikan informasi jumlah penduduk, kepadatan penduduk, dan luas wilayah di Kota Bogor.  Sumber data diperoleh dari Kota Bogor Dalam Angka yang diterbitkan Badan Pusat Statistik Kota Bogor pada tahun 2024';
        };
        abstract.addTo(map);
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_OSMStandard_0');
        map.getPane('pane_OSMStandard_0').style.zIndex = 400;
        var layer_OSMStandard_0 = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            pane: 'pane_OSMStandard_0',
            opacity: 1.0,
            attribution: '<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap contributors, CC-BY-SA</a>',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OSMStandard_0;
        map.addLayer(layer_OSMStandard_0);
        function pop_Kepadatan_Penduduk_Kota_Bogor_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">LUASWH</th>\
                        <td>' + (feature.properties['LUASWH'] !== null ? autolinker.link(String(feature.properties['LUASWH']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Kecamatan</th>\
                        <td>' + (feature.properties['WADMKC'] !== null ? autolinker.link(String(feature.properties['WADMKC']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Jumlah Penduduk (ribu)</th>\
                        <td>' + (feature.properties['jml_pddk'] !== null ? autolinker.link(String(feature.properties['jml_pddk']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Luas Wilayah</th>\
                        <td>' + (feature.properties['Luas'] !== null ? autolinker.link(String(feature.properties['Luas']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Kepadatan Penduduk (ribu per km2)</th>\
                        <td>' + (feature.properties['kpd_pddk'] !== null ? autolinker.link(String(feature.properties['kpd_pddk']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Kepadatan_Penduduk_Kota_Bogor_1_0(feature) {
            if (feature.properties['kpd_pddk'] >= 17.774000 && feature.properties['kpd_pddk'] <= 91.771667 ) {
                return {
                pane: 'pane_Kepadatan_Penduduk_Kota_Bogor_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,255,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['kpd_pddk'] >= 91.771667 && feature.properties['kpd_pddk'] <= 144.275000 ) {
                return {
                pane: 'pane_Kepadatan_Penduduk_Kota_Bogor_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,128,128,1.0)',
                interactive: true,
            }
            }
            if (feature.properties['kpd_pddk'] >= 144.275000 && feature.properties['kpd_pddk'] <= 374.084000 ) {
                return {
                pane: 'pane_Kepadatan_Penduduk_Kota_Bogor_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,0,1.0)',
                interactive: true,
            }
            }
        }
        map.createPane('pane_Kepadatan_Penduduk_Kota_Bogor_1');
        map.getPane('pane_Kepadatan_Penduduk_Kota_Bogor_1').style.zIndex = 401;
        map.getPane('pane_Kepadatan_Penduduk_Kota_Bogor_1').style['mix-blend-mode'] = 'normal';
        var layer_Kepadatan_Penduduk_Kota_Bogor_1 = new L.geoJson(json_Kepadatan_Penduduk_Kota_Bogor_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Kepadatan_Penduduk_Kota_Bogor_1',
            layerName: 'layer_Kepadatan_Penduduk_Kota_Bogor_1',
            pane: 'pane_Kepadatan_Penduduk_Kota_Bogor_1',
            onEachFeature: pop_Kepadatan_Penduduk_Kota_Bogor_1,
            style: style_Kepadatan_Penduduk_Kota_Bogor_1_0,
        });
        bounds_group.addLayer(layer_Kepadatan_Penduduk_Kota_Bogor_1);
        map.addLayer(layer_Kepadatan_Penduduk_Kota_Bogor_1);
        var overlaysTree = [
            {label: 'Kepadatan_Penduduk_Kota_Bogor<br /><table><tr><td style="text-align: center;"><img src="legend/Kepadatan_Penduduk_Kota_Bogor_1_Rendah1892perkm20.png" /></td><td>Rendah (18-92 per km2)</td></tr><tr><td style="text-align: center;"><img src="legend/Kepadatan_Penduduk_Kota_Bogor_1_Sedang92144perkm21.png" /></td><td>Sedang (92-144 per km2)</td></tr><tr><td style="text-align: center;"><img src="legend/Kepadatan_Penduduk_Kota_Bogor_1_Tinggi144374perkm22.png" /></td><td>Tinggi (144-374 per km2)</td></tr></table>', layer: layer_Kepadatan_Penduduk_Kota_Bogor_1},
            {label: "OSM Standard", layer: layer_OSMStandard_0},]
        var lay = L.control.layers.tree(null, overlaysTree,{
            //namedToggle: true,
            //selectorBack: false,
            //closedSymbol: '&#8862; &#x1f5c0;',
            //openedSymbol: '&#8863; &#x1f5c1;',
            //collapseAll: 'Collapse all',
            //expandAll: 'Expand all',
            collapsed: true,
        });
        lay.addTo(map);
        setBounds();
        </script>
    </body>
</html>
